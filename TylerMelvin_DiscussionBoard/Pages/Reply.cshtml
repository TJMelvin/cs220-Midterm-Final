@page
@model TylerMelvin_DiscussionBoard.Pages.ReplyModel
@{
    ViewData["Title"] = "Reply - " + Model.Parent.Title;
}

<div class="card mb-3">
    <div class="card-header">
        <h5 class="card-title">
            Replying to: @Html.Raw(Model.Parent.Title) by @Model.DiscussionThread.ApplicationUser?.ToString()
        </h5>
    </div>
    <div class="card-body">
        <form method="post">
            <div class="mb-3">
                <label asp-for="Parent.Title" class="form-label">Title</label>
                <input asp-for="Parent.Title" class="form-control" />
                <span asp-validation-for="Parent.Title" class="text-danger"></span>
            </div>
            <div class="mb-3">
                <label asp-for="Parent.Content" class="form-label">Content</label>
                <textarea asp-for="Parent.Content" class="form-control" id="quillEditor"></textarea>
                <span asp-validation-for="Parent.Content" class="text-danger"></span>
            </div>
            <button type="submit" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-reply" viewBox="0 0 16 16">
                    <path d="M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005
                    3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.7 8.7 0 0 0-1.921-.306 7 7 0 0
                    0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614
                    8.254l-.042-.028a.147.147 0 0 1 0-.252l.042-.028zM7.8 10.386q.103 0 .223.006c.434.02 1.034.086 1.7.271 1.326.368
                    2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-
                    3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0
                    1.767-.96z"></path>
                </svg>
                Submit Reply
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        var quill = new Quill('#quillEditor', {
            theme: 'snow'
        });

        // Sync Quill content to the textarea before submitting
        document.querySelector('form').onsubmit = function () {
            var content = document.querySelector('textarea[name="Parent.Content"]');
            content.value = quill.root.innerHTML;
        };
    </script>
}